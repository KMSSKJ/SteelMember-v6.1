<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!--框架必需start-->
    @*<link href="~/Content/styles/learun-ui.css" rel="stylesheet" />*@
    <script src="~/Content/Scripts/jquery/jquery-1.10.2.min.js"></script>
    <link href="~/Content/styles/font-awesome.min.css" rel="stylesheet" />
    @*<script src="~/Content/Scripts/utils/learun-ui.js"></script>*@
    @System.Web.Optimization.Styles.Render("~/Content/styles/learun-ui.css")
    @System.Web.Optimization.Scripts.Render("~/Content/scripts/utils/js")
    <!--框架必需end-->
    <!--第三方统计图start-->
    <script src="~/Content/Scripts/plugins/highcharts/highcharts.js"></script>
    <script src="~/Content/Scripts/plugins/highcharts/highcharts-more.js"></script>
    <script src="~/Content/Scripts/plugins/highcharts/modules/exporting.js"></script>
    <!--第三方统计图end-->
    <script>
        var keyValue = request('keyValue');
        $(function () {
            InitialPage();
            LoadDepartmentApp();
        })
        //初始化
        function InitialPage() {
            $('#desktop').height($(window).height() - 22);
            $(window).resize(function (e) {
                window.setTimeout(function () {
                    $('#desktop').height($(window).height() - 22);
                }, 200);
                e.stopPropagation();
            });
        }

        function LoadDepartmentApp() {
            Highcharts.setOptions({
                lang: {
                    printChart: "打印图表",
                    downloadJPEG: "下载JPEG 图片",
                    downloadPDF: "下载PDF文档",
                    downloadPNG: "下载PNG 图片",
                    downloadSVG: "下载SVG 矢量图",
                    exportButtonTitle: "导出图片"
                }
            });
            $.getJSON('../../SteelMember/ProductionSchedule/JsonData?keyValue=' + keyValue, function (data) {
                $('#container').highcharts({
                    chart: {
                        zoomType: 'xy'
                    },
                    title: {
                        text: '生产进度'
                    },
                    xAxis: [{
                        //categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                        //    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        categories: data.X_Array,
                        crosshair: true
                    }],
                    yAxis: [{ // Primary yAxis
                        labels: {
                            format: '{value}',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        },
                        title: {
                            text: '数量',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        },
                    }, { // Secondary yAxis
                        title: {
                            text: '数量',
                            style: {
                                color: Highcharts.getOptions().colors[0]
                            }
                        },
                        labels: {
                            format: '{value}',
                            style: {
                                color: Highcharts.getOptions().colors[0]
                            }
                        },
                        opposite: true
                    }
                    ],
                    tooltip: {
                        shared: true
                    },
                    legend: {//左上脚图例
                        layout: 'vertical',
                        align: 'left',
                        x: 120,
                        verticalAlign: 'top',
                        y: -15,
                        floating: true,
                        backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
                    },
                    series: [{
                        name: '计划生产量',
                        type: 'column',
                        yAxis: 1,
                        //data: [20, 71, 106, 129, 144, 176, 135, 148, 216, 194, 95, 54],
                        data: data.Y_MemberNumberArray,
                        tooltip: {
                            valueSuffix: ''
                        }
                    }, {
                        name: '实际生产量',
                        type: 'spline',
                        yAxis: 0,
                        //data: [49, 71, 106, 129, 144, 176, 135, 148, 216, 194, 95, 54],
                        data: data.Y_ProductionedQuantityArray,
                        tooltip: {
                            valueSuffix: ''
                        }
                    }]
                });
            })
        }
    </script>
</head>
<body>
    <div class="border" id="desktop" style="margin: 10px 10px 0 10px; background: #fff; overflow: auto;">
        <div class="portal-panel">

            <div class="row" style="overflow: hidden; height: 460px;">
                @*<div style="width: 50%; float: left;">
                        <div class="portal-panel-title">
                            <i class="fa fa-bar-chart"></i>&nbsp;&nbsp;一工区单项工程构件总量占比
                        </div>
                        <div class="portal-panel-content" style="margin-top: 10px; overflow: hidden;">
                            <div id="piecontainer">
                            </div>
                        </div>
                    </div>*@
                <div style="width: 100%; float: left;">
                    @*<div class="portal-panel-title">
                            <i class="fa fa-bar-chart"></i>&nbsp;&nbsp;原材料损耗率
                        </div>*@
                    <div class="portal-panel-content" style="margin-top: 10px; overflow: hidden;">
                        <div id="container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
